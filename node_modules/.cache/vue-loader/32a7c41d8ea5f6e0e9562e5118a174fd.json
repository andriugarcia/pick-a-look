{"remainingRequest":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andresgarciamacias/Documents/clothesTinder/src/views/List.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/andresgarciamacias/Documents/clothesTinder/src/views/List.vue","mtime":1595607701738},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CgplbnVtIEljb24gewogIEhpc3RvcmlhbCA9ICdmYXMgZmEtc2hpcnQtdXAnLAogIExpa2UgPSAnZmFzIGZhLXRodW1icy11cCcsCiAgRGlzbGlrZSA9ICdmYXMgZmEtdGh1bWJzLWRvd24nLAogIEZhdm9yaXRlID0gJ2ZhcyBmYS1zdGFyJywKICBCdXkgPSAnZmFzIGZhLXNob3BwaW5nLWxpc3QnCn0KCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIGRhdGE6ICgpID0+ICh7CiAgICBjbG90aGVzOiBbXSwKICAgIHBhZ2luYXRpb25Mb2FkaW5nOiBmYWxzZSwKICAgIHNlbGVjdGVkOiAyLAogICAgcGFnZTogMCwKICAgIGVtcHR5Q2xvdGhlczogZmFsc2UsCiAgICBmdWxsQ2xvdGhlczogZmFsc2UsCiAgICBoaXN0b3JpY2FsT3JkZXI6ICdoaXN0b3JpY2FsRGVzYycsCiAgICBoaXN0b3JpY2FsT3JkZXJMaXN0OiBbJ2hpc3RvcmljYWxEZXNjJywgJ2hpc3RvcmljYWxBc2MnLCAncmF0aW5nQXNjJywgJ3JhdGluZ0Rlc2MnXSwKICB9KSwKICB3YXRjaDogewogICAgJyRyb3V0ZS5uYW1lJzogYXN5bmMgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdDaGFuZ2UgUm91dGUnKTsKICAgICAgdGhpcy5jbG90aGVzID0gW107CiAgICAgIHRoaXMucGFnZSA9IDA7CiAgICAgIHRoaXMuZW1wdHlDbG90aGVzID0gZmFsc2U7CiAgICAgIHRoaXMuZnVsbENsb3RoZXMgPSBmYWxzZTsKICAgICAgdGhpcy5jbG90aGVzID0gYXdhaXQgdGhpcy5nZXRDbG90aGVzKHZhbHVlKTsKICAgICAgaWYgKHRoaXMuY2xvdGhlcy5sZW5ndGggPT0gMCkgdGhpcy5lbXB0eUNsb3RoZXMgPSB0cnVlOwogICAgfSwKCiAgfSwKCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIHRoaXMuY2xvdGhlcyA9IFtdOwogICAgdGhpcy5jbG90aGVzID0gYXdhaXQgdGhpcy5nZXRDbG90aGVzKHRoaXMuJHJvdXRlLm5hbWUpOwogICAgaWYgKHRoaXMuY2xvdGhlcy5sZW5ndGggPT0gMCkgdGhpcy5lbXB0eUNsb3RoZXMgPSB0cnVlOwoKICAgIHdpbmRvdy5vbnNjcm9sbCA9IGFzeW5jKCkgPT4gewogICAgICBpZiAoKHdpbmRvdy5pbm5lckhlaWdodCArIHdpbmRvdy5zY3JvbGxZKSA+PSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCAtIDMyMCAmJiAhdGhpcy5wYWdpbmF0aW9uTG9hZGluZyAmJiAhdGhpcy5mdWxsQ2xvdGhlcykgewogICAgICAgIHRoaXMucGFnaW5hdGlvbkxvYWRpbmcgPSB0cnVlCiAgICAgICAgdGhpcy5wYWdlICs9IDE7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5wYWdlKQogICAgICAgIGNvbnN0IG5leHRQYWdlQ2xvdGhlcyA9IGF3YWl0IHRoaXMuZ2V0Q2xvdGhlcyh0aGlzLiRyb3V0ZS5uYW1lKTsKICAgICAgICB0aGlzLmNsb3RoZXMgPSBbCiAgICAgICAgICAuLi50aGlzLmNsb3RoZXMsIAogICAgICAgICAgLi4ubmV4dFBhZ2VDbG90aGVzLAogICAgICAgIF0KICAgICAgICBpZiAobmV4dFBhZ2VDbG90aGVzLmxlbmd0aCA9PSAwKSB0aGlzLmZ1bGxDbG90aGVzID0gdHJ1ZQogICAgICAgIHRoaXMucGFnaW5hdGlvbkxvYWRpbmcgPSBmYWxzZQogICAgICB9CiAgICB9CgogIH0sCiAgZmlsdGVyczogewogICAgY2F0ZWdvcmllVGl0bGUodmFsdWUpIHsKICAgICAgc3dpdGNoICh2YWx1ZSkgewogICAgICAgIGNhc2UgJ2hpc3RvcmljYWxEZXNjJzoKICAgICAgICAgIHJldHVybiAnw5psdGltYXMgcXVlIHZvdGFzdGUnCiAgICAgICAgY2FzZSAnaGlzdG9yaWNhbEFzYyc6CiAgICAgICAgICByZXR1cm4gJ1ByaW1lcmFzIHF1ZSB2b3Rhc3RlJwogICAgICAgIGNhc2UgJ3JhdGluZ0Rlc2MnOgogICAgICAgICAgcmV0dXJuICdUZSBoYW4gZ3VzdGFkbyBtw6FzJwogICAgICAgIGNhc2UgJ3JhdGluZ0FzYyc6CiAgICAgICAgICByZXR1cm4gJ1RlIGhhbiBndXN0YWRvIG1lbm9zJwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gJ8OabHRpbWFzIHF1ZSB2b3Rhc3RlJwoKICAgICAgfQogICAgfSwKICAgIHRydW5jYXRlKHRleHQsIHN0b3AsIGNsYW1wKSB7CiAgICAgIHJldHVybiB0ZXh0LnNsaWNlKDAsIHN0b3ApICsgKHN0b3AgPCB0ZXh0Lmxlbmd0aCA/IGNsYW1wIHx8ICcuLi4nIDogJycpOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBsb2dnZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLmxvZ2dlZDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEhlYWRlcigpIDogc3RyaW5nIHsKICAgICAgc3dpdGNoICh0aGlzLiRyb3V0ZS5uYW1lKSB7CiAgICAgICAgY2FzZSAnSGlzdG9yaWFsJzoKICAgICAgICAgIHJldHVybiAnUHJlbmRhcyBxdWUgaGFzIHZvdGFkbyc7CiAgICAgICAgY2FzZSAnTGlrZXMnOgogICAgICAgICAgcmV0dXJuICdQcmVuZGFzIHF1ZSB0ZSBoYW4gZ3VzdGFkbyc7CiAgICAgICAgY2FzZSAnRGlzbGlrZXMnOgogICAgICAgICAgcmV0dXJuICdQcmVuZGFzIHF1ZSBubyB0ZSBoYW4gZ3VzdGFkbyc7CiAgICAgICAgY2FzZSAnRmF2b3JpdGVzJzoKICAgICAgICAgIHJldHVybiAnUHJlbmRhcyBGYXZvcml0YXMnOwogICAgICAgIGNhc2UgJ0JvdWdodCc6CiAgICAgICAgICByZXR1cm4gJ1ByZW5kYXMgcXVlIGhhcyBjb21wcmFkbyc7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBjaGFuZ2VIaXN0b3JpY2FsT3JkZXIoKSB7CiAgICAgIHRoaXMuY2xvdGhlcyA9IFtdCiAgICAgIHRoaXMuY2xvdGhlcyA9IGF3YWl0IHRoaXMuZ2V0Q2xvdGhlcyh0aGlzLiRyb3V0ZS5uYW1lKTsKICAgIH0sCgogICAgYnV5KGNhcmQpIHsKICAgICAgY29uc29sZS5sb2coY2FyZCkKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3N0YWNrL2JvdWdodCcsIGNhcmQuY29kZSk7CiAgICAgIHdpbmRvdy5vcGVuKGBodHRwczovL3d3dy5hbWF6b24uZXMvZHAvJHtjYXJkLmNvZGV9L3JlZj1hc19saV9zc190bD9pZT1VVEY4JmxpbmtDb2RlPWxsMSZ0YWc9cGlja2Fsb29rLTIxJmxpbmtJZD0zMjU2YmI3MWZmODBiMDFlYTE0Y2I1MzRlNzc1ODI4MyZsYW5ndWFnZT1lc19FU2ApOwogICAgfSwKCiAgICBnZXRJY29uKCkgOiBzdHJpbmcgewogICAgICBzd2l0Y2ggKHRoaXMuJHJvdXRlLm5hbWUpIHsKICAgICAgICBjYXNlICdMaWtlcyc6CiAgICAgICAgICByZXR1cm4gSWNvbi5MaWtlOwogICAgICAgIGNhc2UgJ0Rpc2xpa2VzJzoKICAgICAgICAgIHJldHVybiBJY29uLkRpc2xpa2U7CiAgICAgICAgY2FzZSAnRmF2b3JpdGVzJzoKICAgICAgICAgIHJldHVybiBJY29uLkZhdm9yaXRlOwogICAgICAgIGNhc2UgJ0JvdWdodCc6CiAgICAgICAgICByZXR1cm4gSWNvbi5CdXk7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgfSwKCiAgICB1bmZhdihpKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzdGFjay91bmZhdicsIHRoaXMuY2xvdGhlc1tpXS5jb2RlKTsKICAgICAgdGhpcy5jbG90aGVzLnNwbGljZShpLCAxKTsKICAgIH0sCgogICAgZ2V0Q2xvdGhlcyhyb3V0ZSkgewogICAgICBjb25zb2xlLmxvZyhyb3V0ZSkKICAgICAgc3dpdGNoIChyb3V0ZSkgewogICAgICAgIGNhc2UgJ0hpc3RvcmlhbCc6CiAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xpc3QvaGlzdG9yaWFsJywge29yZGVyOiB0aGlzLmhpc3RvcmljYWxPcmRlciwgcGFnZTogdGhpcy5wYWdlfSk7CiAgICAgICAgY2FzZSAnTGlrZXMnOgogICAgICAgICAgY29uc29sZS5sb2coJ0xpa2VzJyk7CiAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xpc3QvbGlrZXMnKTsKICAgICAgICBjYXNlICdEaXNsaWtlcyc6CiAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xpc3QvZGlzbGlrZXMnKTsKICAgICAgICBjYXNlICdGYXZvcml0ZXMnOgogICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsaXN0L2Zhdm9yaXRlcycsIHRoaXMucGFnZSk7CiAgICAgICAgY2FzZSAnQm91Z2h0JzoKICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbGlzdC9ib3VnaHQnLCB0aGlzLnBhZ2UpOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgfSwKCn0pOwo="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"List.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"pug\">\n  #List\n    v-subheader.mt-6.hookle--text(style=\"font-size: 1.2em\") {{ getHeader() }}\n    v-layout.mt-2(v-if=\"$route.name == 'Historial'\", align-center, wrap)\n      v-flex(xs12, lg-3)\n        v-subheader Ordenar por\n      v-flex(xs12, lg-9)\n        v-overflow-btn(label=\"Ordenar por\", :items=\"historicalOrderList\", @change=\"changeHistoricalOrder\", v-model=\"historicalOrder\", color=\"hookle\", item-color=\"hookle\")\n          template(v-slot:selection=\"data\")\n            v-chip.ml-4(v-bind=\"data.attrs\", small, label, dark, color=\"hookle\", :input-value=\"data.selected\", @click=\"data.select\") {{data.item | categorieTitle}}\n          template(v-slot:item=\"data\")\n            v-list-item-content {{data.item | categorieTitle}}\n    v-layout(justify-center, v-if=\"clothes.length == 0\")\n      v-progress-circular.mt-12(indeterminate, color=\"hookle\", size=\"56\")\n    div(v-else)\n      v-card.ma-4.pa-12(v-if=\"emptyClothes\", flat, tile, color=\"#f5005740\", style=\"border: 1px solid #f50057\")\n        v-layout(justify-center, align-center)\n          v-icon(x-large, color=\"black\") fa fa-sad-tear\n          b.ml-4 Todavía no hay ninguna prenda\n      masonry(v-else, :cols=\"{default: 4, 1000: 3, 700: 2, 400: 1}\")\n        v-card.elevation-6.ma-2.mb-4(v-for=\"(clothing, i) in clothes\", :key=\"i\", hover, @click=\"buy(clothing)\", flat)\n          img(v-for=\"(picture, i) in clothing.pictures\", style=\"width: 100%\", :src=\"picture\", :srcset=\"clothing.srcsets[i]\")\n          v-card.text-left.smallcard(style=\"height: 100%; position: relative\", flat, color=\"#f50057\", tile)\n            div(style=\"overflow: hidden; position: absolute; top: -24px; left: 0; width: 100%\")\n              .triangle\n            v-layout.pl-4(justify-space-between)\n              .mr-2\n                strong(style=\"font-size: .8em\") {{clothing.brand | truncate(40)}}\n                div(style=\"font-size: .8em\") {{clothing.name | truncate(40)}}\n              .mb-5.mt-4.py-1.px-2(v-if=\"clothing.price != '0€'\", style=\"background-color: black; max-height: 36px; border-radius: 50px 0 0 50px;\", align-center)\n                b.white--text(style=\"font-size: .8em\") {{clothing.price}}\n            v-btn.mt-2(v-if=\"$route.name == 'Favorites'\", tile, depressed, block, color=\"tyellow\", @click.stop=\"unfav(i)\")\n              v-icon(small) fas fa-star\n              .ml-2.text-capitalize(style=\"letter-spacing: 0\") Quitar de Favoritos\n            v-btn.mt-2(v-else, tile, depressed, block, color=\"tblue\")\n              v-icon(small) fas fa-shopping-cart\n              .ml-2.text-capitalize(style=\"letter-spacing: 0\") Comprar\n    v-progress-circular.my-12(v-if=\"paginationLoading\",indeterminate, color=\"hookle\", size=\"56\")\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue';\n\nenum Icon {\n  Historial = 'fas fa-shirt-up',\n  Like = 'fas fa-thumbs-up',\n  Dislike = 'fas fa-thumbs-down',\n  Favorite = 'fas fa-star',\n  Buy = 'fas fa-shopping-list'\n}\n\nexport default Vue.extend({\n  data: () => ({\n    clothes: [],\n    paginationLoading: false,\n    selected: 2,\n    page: 0,\n    emptyClothes: false,\n    fullClothes: false,\n    historicalOrder: 'historicalDesc',\n    historicalOrderList: ['historicalDesc', 'historicalAsc', 'ratingAsc', 'ratingDesc'],\n  }),\n  watch: {\n    '$route.name': async function (value) {\n      console.log('Change Route');\n      this.clothes = [];\n      this.page = 0;\n      this.emptyClothes = false;\n      this.fullClothes = false;\n      this.clothes = await this.getClothes(value);\n      if (this.clothes.length == 0) this.emptyClothes = true;\n    },\n\n  },\n\n  async mounted() {\n    this.clothes = [];\n    this.clothes = await this.getClothes(this.$route.name);\n    if (this.clothes.length == 0) this.emptyClothes = true;\n\n    window.onscroll = async() => {\n      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 320 && !this.paginationLoading && !this.fullClothes) {\n        this.paginationLoading = true\n        this.page += 1;\n        console.log(this.page)\n        const nextPageClothes = await this.getClothes(this.$route.name);\n        this.clothes = [\n          ...this.clothes, \n          ...nextPageClothes,\n        ]\n        if (nextPageClothes.length == 0) this.fullClothes = true\n        this.paginationLoading = false\n      }\n    }\n\n  },\n  filters: {\n    categorieTitle(value) {\n      switch (value) {\n        case 'historicalDesc':\n          return 'Últimas que votaste'\n        case 'historicalAsc':\n          return 'Primeras que votaste'\n        case 'ratingDesc':\n          return 'Te han gustado más'\n        case 'ratingAsc':\n          return 'Te han gustado menos'\n        default:\n          return 'Últimas que votaste'\n\n      }\n    },\n    truncate(text, stop, clamp) {\n      return text.slice(0, stop) + (stop < text.length ? clamp || '...' : '');\n    },\n  },\n  computed: {\n    logged() {\n      return this.$store.state.auth.logged;\n    }\n  },\n  methods: {\n    getHeader() : string {\n      switch (this.$route.name) {\n        case 'Historial':\n          return 'Prendas que has votado';\n        case 'Likes':\n          return 'Prendas que te han gustado';\n        case 'Dislikes':\n          return 'Prendas que no te han gustado';\n        case 'Favorites':\n          return 'Prendas Favoritas';\n        case 'Bought':\n          return 'Prendas que has comprado';\n        default:\n          return '';\n      }\n    },\n\n    async changeHistoricalOrder() {\n      this.clothes = []\n      this.clothes = await this.getClothes(this.$route.name);\n    },\n\n    buy(card) {\n      console.log(card)\n      this.$store.dispatch('stack/bought', card.code);\n      window.open(`https://www.amazon.es/dp/${card.code}/ref=as_li_ss_tl?ie=UTF8&linkCode=ll1&tag=pickalook-21&linkId=3256bb71ff80b01ea14cb534e7758283&language=es_ES`);\n    },\n\n    getIcon() : string {\n      switch (this.$route.name) {\n        case 'Likes':\n          return Icon.Like;\n        case 'Dislikes':\n          return Icon.Dislike;\n        case 'Favorites':\n          return Icon.Favorite;\n        case 'Bought':\n          return Icon.Buy;\n        default:\n          return '';\n      }\n    },\n\n    unfav(i) {\n      this.$store.dispatch('stack/unfav', this.clothes[i].code);\n      this.clothes.splice(i, 1);\n    },\n\n    getClothes(route) {\n      console.log(route)\n      switch (route) {\n        case 'Historial':\n          return this.$store.dispatch('list/historial', {order: this.historicalOrder, page: this.page});\n        case 'Likes':\n          console.log('Likes');\n          return this.$store.dispatch('list/likes');\n        case 'Dislikes':\n          return this.$store.dispatch('list/dislikes');\n        case 'Favorites':\n          return this.$store.dispatch('list/favorites', this.page);\n        case 'Bought':\n          return this.$store.dispatch('list/bought', this.page);\n        default:\n          return [];\n      }\n    },\n  },\n\n});\n</script>\n\n<style>\n  .smallcard {\n    transition: width 1s, height 1s;\n  }\n  .triangle {\n    width: 0;\n    height: 0;\n    border-bottom: 24px solid #f50057;\n    border-right: 50vw solid transparent;\n  }\n</style>\n"]}]}