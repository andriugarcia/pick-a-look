{"remainingRequest":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/babel-loader/lib/index.js!/Users/andresgarciamacias/Documents/clothesTinder/node_modules/ts-loader/index.js??ref--13-2!/Users/andresgarciamacias/Documents/clothesTinder/src/store/auth.ts","dependencies":[{"path":"/Users/andresgarciamacias/Documents/clothesTinder/src/store/auth.ts","mtime":1595005366086},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andresgarciamacias/Documents/clothesTinder/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FuZHJlc2dhcmNpYW1hY2lhcy9Eb2N1bWVudHMvY2xvdGhlc1RpbmRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBBeGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB1c2VyOiB7fSwKICAgIGxvZ2dlZDogZmFsc2UKICB9LAogIG11dGF0aW9uczogewogICAgc2V0VG9rZW46IGZ1bmN0aW9uIHNldFRva2VuKF8sIHRva2VuKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIEpTT04uc3RyaW5naWZ5KHRva2VuKSk7CiAgICAgIEF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KHRva2VuKTsKICAgIH0sCiAgICBzZXRMb2dnZWQ6IGZ1bmN0aW9uIHNldExvZ2dlZChzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS5sb2dnZWQgPSBkYXRhOwogICAgfSwKICAgIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoc3RhdGUsIGRhdGEpIHsKICAgICAgc3RhdGUudXNlciA9IGRhdGE7CiAgICB9LAogICAgc2V0RmlsdGVyczogZnVuY3Rpb24gc2V0RmlsdGVycyhzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS51c2VyLmZpbHRlcnMgPSBkYXRhOwogICAgfSwKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcihzdGF0ZSkgewogICAgICBzdGF0ZS51c2VyID0ge307CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRUb2tlbjogZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAvLyBTaSBubyBoYXkgbmluZ8O6biB0b2tlbiBlbiBjYWNoZSBsbyBjcmVhbW9zIHZhY8OtbwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIEpTT04uc3RyaW5naWZ5KCcnKSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGdldFVzZXI6IGZ1bmN0aW9uIGdldFVzZXIoX3JlZikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIF95aWVsZCRBeGlvcyRnZXQsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkdFVFRJTkcgVVNFUiIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gQXhpb3MuZ2V0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0VORFBPSU5ULCAiL2dldE1lIikpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfeWllbGQkQXhpb3MkZ2V0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkQXhpb3MkZ2V0LmRhdGE7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VXNlcicsIGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2hlY2tMb2dnZWQ6IGZ1bmN0aW9uIGNoZWNrTG9nZ2VkKF9yZWYyKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQsIGdldHRlcnMsIGRpc3BhdGNoLCB0b2tlbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0LCBnZXR0ZXJzID0gX3JlZjIuZ2V0dGVycywgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIHRva2VuID0gZ2V0dGVycy5nZXRUb2tlbjsKCiAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgdG9rZW4gIT09ICd1bmRlZmluZWQnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDM7CiAgICAgICAgICAgICAgICAvLyBIYWNlbW9zIHF1ZSBBeGlvcyBsbyBpbmNsdXlhIHNpZW1wcmUgZW4gZWwgaGVhZGVyIGRlIHRvZGFzIGxhcyBwZXRpY2lvbmVzCiAgICAgICAgICAgICAgICBBeGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbiA9IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0b2tlbikKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvZ2dlZCcsIHRydWUpOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2dldFVzZXInKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnc3RhY2svZmV0Y2gnLCB7fSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgaWYgKF9jb250ZXh0Mi5zZW50KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbW1pdCgnc3RhY2svdXBkYXRlQ2FyZHMnLCBbewogICAgICAgICAgICAgICAgICB0eXBlOiAnd2VsY29tZScKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2xvZ2luJwogICAgICAgICAgICAgICAgfV0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvZ2dlZCcsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdMYSBzZXNpw7NuIGhhIGNhZHVjYWRvJywgX2NvbnRleHQyLnQwKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBjb21taXQoJ3N0YWNrL3VwZGF0ZUNhcmRzJywgW3sKICAgICAgICAgICAgICAgICAgdHlwZTogJ2xvZ2luJwogICAgICAgICAgICAgICAgfV0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzMsIDE0XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgY29tbWl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ2NsZWFyJyk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3N0YWNrL2NsZWFyJywge30sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFRva2VuJywgJycpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRMb2dvdXQnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3N0YWNrL3VwZGF0ZUNhcmRzJywgW3sKICAgICAgICAgICAgICAgICAgdHlwZTogJ2xvZ2luJwogICAgICAgICAgICAgICAgfV0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25pbjogZnVuY3Rpb24gc2lnbmluKF9yZWY0LCBfcmVmNSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgY29tbWl0LCBkaXNwYXRjaCwgZW1haWwsIHBhc3N3b3JkLCBfeWllbGQkQXhpb3MkcG9zdCwgZGF0YSwgcmVzdWx0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjQuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgZW1haWwgPSBfcmVmNS5lbWFpbCwgcGFzc3dvcmQgPSBfcmVmNS5wYXNzd29yZDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTSUdOSU4nKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBBeGlvcy5wb3N0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0VORFBPSU5ULCAiL3NpZ25pbiIpLCB7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX3lpZWxkJEF4aW9zJHBvc3QgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkQXhpb3MkcG9zdC5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFRva2VuJywgZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdnZXRVc2VyJyk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdzdGFjay9mZXRjaCcsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvZ2dlZCcsIHJlc3VsdCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTk7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDQudDApOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgbnVsbCwgW1szLCAxOV1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbnVwOiBmdW5jdGlvbiBzaWdudXAoX3JlZjYsIF9yZWY3KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCBlbWFpbCwgcGFzc3dvcmQsIF95aWVsZCRBeGlvcyRwb3N0MiwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY2LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmNi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIGVtYWlsID0gX3JlZjcuZW1haWwsIHBhc3N3b3JkID0gX3JlZjcucGFzc3dvcmQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU0lHTlVQJyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDM7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gQXhpb3MucG9zdCgnJHtwcm9jZXNzLmVudi5WVUVfQVBQX0VORFBPSU5UfS9zaWdudXAnLCB7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX3lpZWxkJEF4aW9zJHBvc3QyID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJEF4aW9zJHBvc3QyLmRhdGE7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VG9rZW4nLCBkYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9nZ2VkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdnZXRVc2VyJyk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnc3RhY2svZmV0Y2hQb3B1bGFycycsIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0NS50MCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCBudWxsLCBbWzMsIDE3XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/andresgarciamacias/Documents/clothesTinder/src/store/auth.ts"],"names":[],"mappings":"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","sourcesContent":["import Axios from 'axios';\n\nexport default {\n  namespaced: true,\n  state: {\n    user: {},\n    logged: false,\n  },\n\n  mutations: {\n    setToken(_, token) : void {\n      localStorage.setItem('token', JSON.stringify(token));\n      Axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n    },\n\n    setLogged(state, data) {\n      state.logged = data;\n    },\n\n    setUser(state, data) {\n      state.user = data;\n    },\n\n    setFilters(state, data) {\n      state.user.filters = data;\n    },\n\n    clear(state) {\n      state.user = {};\n    },\n  },\n\n  getters: {\n    getToken() : string | null {\n      if (localStorage.getItem('token') === 'undefined') {\n        // Si no hay ningún token en cache lo creamos vacío\n        localStorage.setItem('token', JSON.stringify(''));\n        return null;\n      }\n\n      return JSON.parse(localStorage.getItem('token'));\n    },\n  },\n\n  actions: {\n    async getUser({ commit }) {\n      console.log(\"GETTING USER\")\n      let {data} = await Axios.get(`${process.env.VUE_APP_ENDPOINT}/getMe`)\n      console.log(data);\n      commit('setUser', data);\n    },\n    async checkLogged({ commit, getters, dispatch }) {\n      const token = getters.getToken;\n      if (typeof token !== 'undefined') {\n        try {\n          // Hacemos que Axios lo incluya siempre en el header de todas las peticiones\n          Axios.defaults.headers.common = {\n            Authorization: `Bearer ${token}`,\n          };\n          commit('setLogged', true);\n          dispatch('getUser');\n          if (!(await dispatch('stack/fetch', {}, { root: true }))) {\n            commit('stack/updateCards', [\n              {\n                type: 'welcome',\n              },\n              {\n                type: 'login',\n              },\n            ], { root: true });\n            commit('setLogged', false);\n          }\n        } catch (err) {\n          console.error('La sesión ha caducado', err);\n          return false;\n        }\n      } else {\n        commit('stack/updateCards', [\n          {\n            type: 'login',\n          },\n        ], { root: true });\n      }\n      return false;\n    },\n\n    async logout({ commit }) {\n      commit('clear');\n      commit('stack/clear', {}, { root: true });\n      commit('setToken', '');\n      commit('setLogout', false);\n      commit('stack/updateCards', [\n        {\n          type: 'login',\n        },\n      ], { root: true });\n    },\n    async signin({ commit, dispatch }, { email, password }) : Promise<boolean> {\n      console.log('SIGNIN');\n\n      try {\n        const { data } = await Axios.post(`${process.env.VUE_APP_ENDPOINT}/signin`, {\n          email,\n          password,\n        });\n\n        console.log(data);\n        commit('setToken', data.token);\n        await dispatch('getUser');\n        const result = await dispatch('stack/fetch', {}, { root: true });\n        commit('setLogged', result);\n        return result;\n      } catch (err) {\n        console.log(err);\n        return false;\n      }\n    },\n    async signup({ commit, dispatch }, { email, password }) : Promise<boolean> {\n      console.log('SIGNUP');\n\n      try {\n        const { data } = await Axios.post('${process.env.VUE_APP_ENDPOINT}/signup', {\n          email,\n          password,\n        });\n\n        console.log(data);\n        commit('setToken', data.token);\n        commit('setLogged', true);\n        await dispatch('getUser');\n        dispatch('stack/fetchPopulars', {}, { root: true });\n        return true;\n      } catch (err) {\n        console.log(err);\n        return false;\n      }\n    },\n  },\n};\n"],"sourceRoot":""}]}